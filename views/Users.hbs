<!-- ============================================================== -->
<!-- Topbar header - style you can find in pages.scss -->
<!-- ============================================================== -->
{{> header}}
<!-- ============================================================== -->
<!-- End Topbar header -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- Left Sidebar - style you can find in sidebar.scss  -->
<!-- ============================================================== -->
{{> slidebar}}
<div class="page-wrapper">
    <!-- ============================================================== -->
    <!-- Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <div class="page-breadcrumb">
        <div class="row">
            <div class="col-5 align-self-center">
                <h4 class="page-title">Dashboard</h4>
            </div>
            <div class="col-7 align-self-center">
                <div class="d-flex align-items-center justify-content-end">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="#">Home</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">
                                Users
                            </li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- End Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Container fluid  -->
    <!-- ============================================================== -->
    <div class="container-fluid">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-6">
                        <h2><b>Manage User</b></h2>
                    </div>
                    <div class="col-sm-6">
                        <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal"><i
                                class="material-icons">&#xE147;</i>
                            <span>Add New User</span></a>

                    </div>
                </div>
            </div>
            <table id="table" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th></th>
                        <th>Fullname</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Address</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each userList}}
                    <tr>
                        <td>
                            <image src="http://localhost:3000/{{avatar}}" style="width: 110px;height:100px" />
                        </td>
                        <td>
                            <p class=" data">{{fullName}}</p>
                        </td>
                        <td>
                            <p class=" data">{{email}}</p>
                        </td>
                        <td>
                            <p class=" data">{{phone}}</p>
                        </td>
                        <td>
                            <p class=" data">{{address}}</p>
                        </td>
                        <td>
                            <a href="/Profile/{{_id}}" class="edit"><i class="material-icons"
                                    title="Edit">&#xE254;</i></a>
                            {{!-- <a href="#deleteEmployeeModal" class="delete" data-toggle="modal"><i class="material-icons"
                                    title="Delete">&#xE872;</i></a> --}}
                            <a href="#deleteEmployeeModal" class="delete" data-toggle="modal" data-id="{{_id}}"><i
                                    class="material-icons" title="Delete">&#xE872;</i></a>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
    <!-- Add Modal HTML -->
    <div id="addEmployeeModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="Sign-Up" enctype="multipart/form-data" method="POST">
                    <div class="modal-header">
                        <h4 class="modal-title">Add User</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="bmd-label-floating">Fullname</label>
                            <input type=" text" name="fullName" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label class="bmd-label-floating">Email</label>
                            <input type="email" name="email" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label class="bmd-label-floating">Phone number</label>

                            <input name="phone" class="form-control" placeholder="Phone number" type="number">
                        </div>
                        <div class="form-group">
                            <label class="bmd-label-floating">Address</label>
                            <input type="text" name="address" class="form-control" required />
                        </div>
                        <div class="form-group">
                            <label class="bmd-label-floating">Password</label>
                            <input type="password" name="password" class="form-control" required />
                        </div>
                        <div class="form-group">
                            <label class="bmd-label-floating">Repeat Password</label>
                            <input type="password" name="password2" class="form-control" required />
                        </div>
                        <div class="form-group">
                            <label class="bmd-label-floating">Image</label>
                            <input type="file" name="avatar" class="form-control" width="100%" required />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" />
                        <input type="submit" class="btn btn-success" value="Add" />
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Delete Modal HTML -->
    <div id="deleteEmployeeModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="" id="deleteForm">
                    <div class="modal-header">
                        <h4 class="modal-title">Delete Product</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete these Records?</p>
                        <p class="text-warning">
                            <small>This action cannot be undone.</small>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" />
                        <input type="submit" class="btn btn-danger" value="Delete">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- End Container fluid  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    {{> footer}}
</div>
<script>
    document.querySelectorAll('.delete').forEach(item => {
        item.addEventListener('click', e => {
            let _idDelete = e.target.parentNode.dataset.id
            console.log(e.target.parentNode.dataset.id);
            $("#deleteForm").attr("action", "/DeleteUser/" + _idDelete);
        })
    });
</script>